
# План: Редизайн Ethereal Layer — «Роскошная Яхта» (v2)

## Обзор

Переработанный план с учётом всех правок:
- Смягчённый фон с градиентом (не сплошной тёмный тик)
- Тема через shadcn-токены, scoped в `.ethereal`
- Двойная подпись на каютах (морское название + функция)
- Латунь только для акцентов, не для фона сообщений
- Анимации строго во Фазе 2 с reduced-motion fallback

---

## Цветовая палитра `.ethereal` (через shadcn tokens)

```css
.ethereal {
  /* Смягчённый фон: нейтральный орех → морская глубина */
  --background: 25 18% 8%;           /* #16120f — тёплый нейтральный */
  --foreground: 35 15% 92%;          /* Кремовый текст */

  /* Панели: матовый орех */
  --card: 28 16% 14%;                /* #292018 */
  --card-foreground: 35 15% 92%;

  --popover: 28 16% 16%;
  --popover-foreground: 35 15% 92%;

  /* Латунь/золото — primary accent */
  --primary: 43 75% 48%;             /* #c9a227 приближённо */
  --primary-foreground: 25 18% 8%;

  /* Тёмный орех — secondary */
  --secondary: 28 14% 18%;
  --secondary-foreground: 35 12% 82%;

  --muted: 28 12% 16%;
  --muted-foreground: 32 10% 65%;

  /* Глубокий морской — accent */
  --accent: 210 45% 28%;             /* #1e3a5f приближённо */
  --accent-foreground: 35 15% 95%;

  --destructive: 0 55% 48%;
  --destructive-foreground: 35 15% 95%;

  --border: 28 12% 22%;
  --input: 28 12% 20%;
  --ring: 43 75% 48%;                /* Латунь ring */

  /* Yacht-specific glow */
  --glow-primary: 43 80% 55%;        /* Тёплое латунное свечение */
  --glow-secondary: 210 50% 45%;     /* Морской акцент */
}
```

Градиентный overlay для фона (в компоненте):
```css
background: linear-gradient(
  180deg,
  hsl(var(--background)) 0%,
  hsl(210 35% 10%) 100%
);
```

---

## Структура кают (страницы)

| Путь | Морское название | Функция | Иконка |
|------|------------------|---------|--------|
| `/e/home` | Главный салон | Лобби | `Ship` |
| `/e/chat` | Бар | Чат | `Wine` или `MessageCircle` |
| `/e/chronicles` | Библиотека | Хроники | `BookOpen` |
| `/e/tasks` | Капитанский мостик | Задачи | `Anchor` |
| `/e/calendar` | Штурманская карта | Календарь | `Map` |
| `/e/games` | Игровой зал | Игры | `Gamepad2` (заглушка) |

---

## Фаза 1: Базовый редизайн

### 1.1 CSS-тема (src/index.css)

Добавить scoped shadcn-токены в `.ethereal`:

```css
.ethereal {
  --background: 25 18% 8%;
  --foreground: 35 15% 92%;
  --card: 28 16% 14%;
  /* ... остальные токены */
}
```

Все shadcn-компоненты (Button, Card, Input) автоматически подхватят новые значения внутри `.ethereal` контейнера.

### 1.2 EtherealGate (Layout wrapper)

Обновить обёртку:
- Добавить градиентный overlay на фон
- Класс `ethereal` уже применяется ✓

### 1.3 EtherealHome → YachtSalon

**Структура:**

```
┌─────────────────────────────────────┐
│  ⚓ S/Y Aurora        ● На ходу     │  ← Header (название яхты + статус)
├─────────────────────────────────────┤
│                                     │
│   Добро пожаловать на борт,         │
│        {displayName}!               │
│                                     │
├─────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐   │
│  │  🍷 Бар     │  │ 📖 Библиот. │   │
│  │    Чат     │  │   Хроники   │   │  ← Двойная подпись
│  └─────────────┘  └─────────────┘   │
│  ┌─────────────┐  ┌─────────────┐   │
│  │ ⚓ Мостик   │  │ 🗺️ Карта    │   │
│  │   Задачи   │  │  Календарь  │   │
│  └─────────────┘  └─────────────┘   │
│  ┌─────────────┐                    │
│  │ 🎮 Игровой  │  ← "Скоро"        │
│  │     зал    │                    │
│  └─────────────┘                    │
├─────────────────────────────────────┤
│  Гости на борту: 3                  │
│  ● Капитан  ● Штурман  ● Гость     │
└─────────────────────────────────────┘
```

Карточка каюты (`CabinCard`):
- Тёмный орех фон (`bg-card`)
- Латунный border при hover
- Иконка + морское название (крупно)
- Функциональное название (мелко, muted)

### 1.4 EtherealBottomTabs → YachtDeck

**Обновления:**
- Фон: `bg-card` (орех)
- Активный таб: латунный цвет (`text-primary`) + тонкий top-border
- Иконки: `Wine`, `BookOpen`, `Anchor`, `Map`
- Двойная подпись: морское название + функция (или только короткое)

### 1.5 EtherealHeader → YachtHeader

**Обновления:**
- Название: "S/Y Aurora" (или кастомное из комнаты)
- Статус подключения: "На ходу" (connected) / "В порту" (connecting)
- Кнопка "Команда" (Users) → "Экипаж"
- "Покинуть борт" вместо LogOut

### 1.6 EtherealChat → BarLounge

**Стилизация сообщений:**
- Входящие: кремовая бумага (`bg-[#f5f0e8]` / `text-[#1a1612]`)
- Исходящие: тёмный орех (`bg-card`) + тонкий латунный border слева
- Латунь ТОЛЬКО для: кнопки send, активных состояний, иконок
- Input placeholder: "Шепнуть в бар..."
- Typing indicator: "Кто-то наливает..."

### 1.7 Заглушка /e/games

Новый файл: `src/pages/ethereal/EtherealGames.tsx`
- Иконка `Gamepad2`
- "Игровой зал"
- "Скоро откроется..."
- Регистрация route в App.tsx

---

## Изменяемые файлы

| Файл | Изменения |
|------|-----------|
| `src/index.css` | Добавить `.ethereal { --background: ...; }` shadcn tokens |
| `src/components/ethereal/EtherealGate.tsx` | Градиентный overlay |
| `src/components/ethereal/EtherealHeader.tsx` | Yacht-стиль: название, статус, терминология |
| `src/components/ethereal/EtherealBottomTabs.tsx` | Новые иконки, двойные подписи, yacht-стили |
| `src/pages/ethereal/EtherealHome.tsx` | Полный редизайн в YachtSalon с CabinCards |
| `src/pages/ethereal/EtherealChat.tsx` | Bar-стилизация: бумага/орех bubbles, латунные акценты |
| `src/pages/ethereal/EtherealChronicles.tsx` | Обновить заголовок "Библиотека / Хроники" |
| `src/pages/ethereal/EtherealTasks.tsx` | Обновить заголовок "Мостик / Задачи" |
| `src/pages/ethereal/EtherealCalendar.tsx` | Обновить заголовок "Карта / Календарь" |
| **Новый:** `src/pages/ethereal/EtherealGames.tsx` | Заглушка игрового зала |
| `src/App.tsx` | Добавить route `/e/games` |

---

## Фаза 2 (Атмосфера) — Отложено

После одобрения Фазы 1:
- `YachtPorthole.tsx` — анимированный иллюминатор с водой
- Hover-эффекты на дверях кают (латунная ручка, свечение)
- `@media (prefers-reduced-motion: reduce)` → статичная версия
- Лёгкие текстуры webp с низкой opacity (опционально)

---

## Порядок реализации

1. CSS: добавить `.ethereal` tokens в index.css
2. EtherealGate: градиентный overlay
3. EtherealHeader: yacht-терминология
4. EtherealBottomTabs: новые иконки + стили
5. EtherealHome: YachtSalon с карточками кают
6. EtherealChat: Bar-стилизация
7. Остальные страницы: обновить заголовки
8. EtherealGames: заглушка
9. App.tsx: route /e/games

---

## Результат

Пользователи попадают в **атмосферный салон роскошной яхты**, где:
- Тёплая палитра ореха и латуни создаёт ощущение эксклюзивности
- Каждая "каюта" — раздел функционала с понятной навигацией
- Двойные подписи убирают когнитивный разрыв
- shadcn-компоненты автоматически работают в новой теме
