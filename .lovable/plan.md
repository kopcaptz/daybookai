
# –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ Crash Reporter —Å breadcrumbs
- ‚úÖ Usage Tracker —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π  
- ‚úÖ Extended Device Info
- ‚úÖ –ê–¥–º–∏–Ω-—Å—Ç—Ä–∞–Ω–∏—Ü—ã: Crashes, Analytics

**–ü—Ä–æ–±–ª–µ–º–∞:** `trackUsageEvent()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ 1 –º–µ—Å—Ç–µ (FeedbackModal). –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–µ—Ç—Ä–∏–∫ –Ω–µ —Ç—Ä–µ–∫–∞—é—Ç—Å—è!

---

## 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –≤–æ –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –º–µ—Å—Ç–∞

### –ß—Ç–æ –Ω–µ —Ç—Ä–µ–∫–∞–µ—Ç—Å—è —Å–µ–π—á–∞—Å
| –ú–µ—Ç—Ä–∏–∫–∞ | –ì–¥–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å |
|---------|-----------------|
| `entriesCreated` | NewEntry.tsx –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ |
| `entriesEdited` | DayView.tsx –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ |
| `aiChatMessages` | ChatPage.tsx –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ |
| `aiBiographiesGenerated` | BiographyPromptDialog.tsx |
| `aiReceiptsScanned` | ReceiptScanPage.tsx |
| `autoMoodSuggestions/Accepted` | usePredictiveMood.ts |
| `autoTagsSuggested/Accepted` | useAutoTags.ts |
| `remindersCreated` | QuickReminderSheet.tsx |
| `discussionSessionsStarted` | DiscussionsListPage.tsx |

### –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
- `src/pages/NewEntry.tsx` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `trackUsageEvent('entriesCreated')` + `trackTextLength()`
- `src/pages/ChatPage.tsx` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `trackUsageEvent('aiChatMessages')` –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ
- `src/hooks/usePredictiveMood.ts` ‚Äî —Ç—Ä–µ–∫–∞—Ç—å suggestions –∏ accepts
- `src/hooks/useAutoTags.ts` ‚Äî —Ç—Ä–µ–∫–∞—Ç—å suggestions –∏ accepts
- –ò –¥—Ä—É–≥–∏–µ –ø–æ —Å–ø–∏—Å–∫—É –≤—ã—à–µ

---

## 2. –ì—Ä–∞—Ñ–∏–∫–∏ —Å Recharts –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### –¢–µ–∫—É—â–∏–π UI
–°–µ–π—á–∞—Å –¥–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–º–∏ div-–±–∞—Ä–∞–º–∏:
```tsx
{analytics.dailyData.slice(0, 7).map(day => (
  <div className="h-4 bg-violet-500/50 rounded" style={{ width: `${day.entries * 10}%` }} />
))}
```

### –£–ª—É—á—à–µ–Ω–∏–µ
–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ Recharts:
- **Line Chart**: —Å–µ—Å—Å–∏–∏ –∏ –∑–∞–ø–∏—Å–∏ –ø–æ –¥–Ω—è–º
- **Bar Chart**: AI-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (—á–∞—Ç, –±–∏–æ–≥—Ä–∞—Ñ–∏–∏, —Å–∫–∞–Ω—ã)
- **Area Chart**: –∫–æ–Ω–≤–µ—Ä—Å–∏—è auto-mood/tags —Å —Ç—Ä–µ–Ω–¥–æ–º

Recharts —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç–µ.

---

## 3. Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è
–ö–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–æ–≤—ã–π crash —Å `occurrence_count > 5` –∑–∞ —á–∞—Å ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã notifications –≤ –±—Ä–∞—É–∑–µ—Ä–µ).

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –î–æ–±–∞–≤–∏—Ç—å Edge Function `admin-crash-alert` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —á–∞—Å—Ç–æ—Ç—ã
- –ù–∞ dashboard –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ push (—á–µ—Ä–µ–∑ Web Push API)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å toast –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–ª–µ—Ä—Ç–∞

---

## 4. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∞–¥–º–∏–Ω–∫–∏

### –î–ª—è Crashes
- –ö–Ω–æ–ø–∫–∞ "–≠–∫—Å–ø–æ—Ä—Ç CSV" —Å–æ –≤—Å–µ–º–∏ –æ—à–∏–±–∫–∞–º–∏
- –§–∏–ª—å—Ç—Ä –ø–æ –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ

### –î–ª—è Analytics
- –≠–∫—Å–ø–æ—Ä—Ç —Å—ã—Ä—ã—Ö –º–µ—Ç—Ä–∏–∫ –∑–∞ –ø–µ—Ä–∏–æ–¥
- –≠–∫—Å–ø–æ—Ä—Ç device breakdown

---

## 5. Retention –∏ –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–±–ª–µ–º–∞
–¢–∞–±–ª–∏—Ü—ã `crash_reports` –∏ `usage_analytics` –±—É–¥—É—Ç —Ä–∞—Å—Ç–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ.

### –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–∏—Ç—å Edge Function `cleanup-telemetry` (cron):
- –£–¥–∞–ª—è—Ç—å resolved/ignored crashes —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å analytics —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π –≤ weekly summaries
- –£–¥–∞–ª—è—Ç—å raw analytics —Å—Ç–∞—Ä—à–µ 90 –¥–Ω–µ–π

---

## 6. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ crashes –ø–æ signature

### –¢–µ–∫—É—â–µ–µ
–ö–∞–∂–¥–∞—è –æ—à–∏–±–∫–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ –ë–î.

### –£–ª—É—á—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–∏—Ç—å `error_signature` (hash –æ—Ç message + –ø–µ—Ä–≤—ã–µ 3 —Å—Ç—Ä–æ–∫–∏ stack):
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –≤ Edge Function
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç `occurrence_count` –≤–º–µ—Å—Ç–æ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
- –ü–æ–∫–∞–∑ "affected sessions" –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã

---

## 7. Healthcheck-–¥–∞—à–±–æ—Ä–¥ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π –∞–¥–º–∏–Ω–∫–∏

### –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–∂–µ—Ç—ã
- **–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã**: –∑–µ–ª—ë–Ω—ã–π/–∂—ë–ª—Ç—ã–π/–∫—Ä–∞—Å–Ω—ã–π
- **–°–µ–≥–æ–¥–Ω—è**: —Å–µ—Å—Å–∏–π, –∑–∞–ø–∏—Å–µ–π, –æ—à–∏–±–æ–∫ (–º–∏–Ω–∏-–∫–∞—Ä—Ç–æ—á–∫–∏)
- **–¢—Ä–µ–Ω–¥**: —Å—Ç—Ä–µ–ª–∫–∞ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤—á–µ—Ä–∞
- **Top –æ—à–∏–±–∫–∞**: —Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –∑–∞ 24—á

---

## 8. Source maps –¥–ª—è —á–∏—Ç–∞–µ–º—ã—Ö stack traces

### –ü—Ä–æ–±–ª–µ–º–∞
–°–µ–π—á–∞—Å stack traces —Å–æ–¥–µ—Ä–∂–∞—Ç minified –∫–æ–¥:
```
at e.render (app.js:1:12345)
```

### –†–µ—à–µ–Ω–∏–µ
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å source maps –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
- –ó–∞–≥—Ä—É–∂–∞—Ç—å –∏—Ö –≤ storage
- Edge Function `crash-report` ‚Äî –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–µ–∫–∏ —á–µ—Ä–µ–∑ source-map library

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

| # | –£–ª—É—á—à–µ–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ |
|---|-----------|-----------|---------|
| 1 | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è trackUsageEvent | –ù–∏–∑–∫–∞—è | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ ‚Äî –±–µ–∑ —ç—Ç–æ–≥–æ –º–µ—Ç—Ä–∏–∫–∏ –ø—É—Å—Ç—ã–µ! |
| 2 | Recharts –≥—Ä–∞—Ñ–∏–∫–∏ | –°—Ä–µ–¥–Ω—è—è | üü° –£–¥–æ–±—Å—Ç–≤–æ |
| 3 | –§–∏–ª—å—Ç—Ä –ø–æ –≤–µ—Ä—Å–∏–∏ –≤ crashes | –ù–∏–∑–∫–∞—è | üü° –£–¥–æ–±—Å—Ç–≤–æ |
| 4 | CSV —ç–∫—Å–ø–æ—Ä—Ç | –ù–∏–∑–∫–∞—è | üü¢ Nice-to-have |
| 5 | –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ crashes | –°—Ä–µ–¥–Ω—è—è | üü° –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å |
| 6 | Healthcheck –≤–∏–¥–∂–µ—Ç—ã | –°—Ä–µ–¥–Ω—è—è | üü¢ Nice-to-have |
| 7 | Data retention | –í—ã—Å–æ–∫–∞—è | üü¢ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ |
| 8 | Source maps | –í—ã—Å–æ–∫–∞—è | üü¢ Advanced |

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ù–∞—á–∞—Ç—å —Å #1** ‚Äî –±–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ `trackUsageEvent` –≤ –∫–ª—é—á–µ–≤—ã–µ –º–µ—Å—Ç–∞ –≤—Å—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω—É–ª–∏. –≠—Ç–æ 30-–º–∏–Ω—É—Ç–Ω–∞—è –∑–∞–¥–∞—á–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º.

–ó–∞—Ç–µ–º **#2 + #3** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX –∞–¥–º–∏–Ω–∫–∏.
