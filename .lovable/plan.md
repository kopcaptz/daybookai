
# ТЗ: Логичный выход из админ-панели

## Текущее поведение

| Страница | Кнопка выхода | Куда ведёт |
|----------|---------------|------------|
| `/admin` (логин) | Нет | — |
| `/admin/feedback` | LogOut (справа вверху) | `/admin` (страница логина) |

**Проблема**: После нажатия LogOut пользователь остаётся в "зоне админки" на странице логина. Нет очевидного способа вернуться в основное приложение.

## Предлагаемое решение

### 1. Страница логина (`/admin`)

Добавить кнопку "Назад в приложение" для возврата в основной интерфейс:

```text
┌─────────────────────────────────┐
│  ← Вернуться                    │  (левый верхний угол)
│                                 │
│         ┌──────────┐            │
│         │  Shield  │            │
│         └──────────┘            │
│       Портал Мастера            │
│  Введите секретный код...       │
│                                 │
│    ┌──────────────────────┐     │
│    │     PIN-код          │     │
│    └──────────────────────┘     │
│    ┌──────────────────────┐     │
│    │   Войти в архив      │     │
│    └──────────────────────┘     │
└─────────────────────────────────┘
```

**Элемент**: Кнопка-ghost с иконкой `ArrowLeft` и текстом "Вернуться"
**Действие**: `navigate('/settings')` (возврат в настройки, откуда пользователь пришёл)

### 2. Страница архива (`/admin/feedback`)

Изменить поведение кнопки LogOut:

| Было | Станет |
|------|--------|
| Редирект на `/admin` | Редирект на `/settings` |
| Пользователь остаётся в зоне админки | Полный выход в приложение |

Дополнительно добавить диалог подтверждения:

```text
┌─────────────────────────────────┐
│       Выйти из архива?          │
│                                 │
│  Вы вернётесь в настройки.      │
│  Для повторного входа           │
│  потребуется PIN-код.           │
│                                 │
│   [Отмена]        [Выйти]       │
└─────────────────────────────────┘
```

### 3. Визуальная индикация

Добавить тултип на кнопку выхода: "Выйти из архива"

## Технические изменения

### Файл: `src/pages/AdminLoginPage.tsx`

1. Импортировать `ArrowLeft` из lucide-react
2. Добавить кнопку "Вернуться" перед Card:

```typescript
<Button 
  variant="ghost" 
  size="sm"
  onClick={() => navigate('/settings')}
  className="absolute top-4 left-4 gap-2 text-muted-foreground"
>
  <ArrowLeft className="h-4 w-4" />
  Вернуться
</Button>
```

### Файл: `src/pages/AdminFeedbackPage.tsx`

1. Импортировать `AlertDialog` компоненты
2. Добавить состояние `showLogoutConfirm`
3. Изменить `handleLogout`:
   - Показать диалог подтверждения
   - После подтверждения: `logout()` + `navigate('/settings')`
4. Обернуть кнопку LogOut в Tooltip

```typescript
const handleLogoutConfirm = () => {
  logout();
  navigate('/settings', { replace: true });
};
```

## UX-логика

```text
Настройки → [долгое нажатие на кролика] → /admin (логин)
                                              │
                                   [← Вернуться] → /settings
                                              │
                                   [PIN верный] ↓
                                              │
                                    /admin/feedback
                                              │
                                   [LogOut] → Диалог подтверждения
                                              │
                                   [Выйти] → /settings
```

## Итоговое поведение

| Действие | Результат |
|----------|-----------|
| Нажать "Вернуться" на странице логина | Возврат в `/settings` без авторизации |
| Нажать LogOut на странице архива | Диалог подтверждения → очистка токена → `/settings` |
| Токен истёк при работе в архиве | Автоматический редирект на `/admin` (логин) |
